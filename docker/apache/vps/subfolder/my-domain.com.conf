# Basic Apache config for tkr in subfolder
# e.g. https://your-domain.com/tkr
# For use with included docker-compose.yml

# Alias for tkr subfolder
<VirtualHost *:80>
    ServerName localhost
    Alias /tkr /var/www/tkr/public

    <Directory "/var/www/tkr/public">
        AllowOverride None
        Require all granted

        # Front controller pattern
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ /tkr/index.php [L]
    </Directory>

    # Block access to sensitive directories
    <Directory "/var/www/tkr/storage">
        Require all denied
    </Directory>
    <Directory "/var/www/tkr/src">
        Require all denied
    </Directory>
    <Directory "/var/www/tkr/config">
        Require all denied
    </Directory>
    <Directory "/var/www/tkr/templates">
        Require all denied
    </Directory>

    # Error and access logs
    ErrorLog ${APACHE_LOG_DIR}/tkr_error.log
    CustomLog ${APACHE_LOG_DIR}/tkr_access.log combined
</VirtualHost>